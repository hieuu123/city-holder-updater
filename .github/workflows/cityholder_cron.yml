name: City Holder Auto Update

on:
  schedule:
    # GitHub Actions dùng UTC => GMT+7 = UTC+7
    # => 11PM - 2AM GMT+7 = 16:00 - 19:00 UTC
    # Mỗi 15 phút trong khoảng đó:
    - cron: "0,15,30,45 16 * * *"  # 23:00 GMT+7
    - cron: "0,15,30,45 17 * * *"  # 00:00 GMT+7
    - cron: "0,15,30,45 18 * * *"  # 01:00 GMT+7
    - cron: "0,15,30,45 19 * * *"  # 02:00 GMT+7
  workflow_dispatch:  # cho phép chạy thủ công trong tab Actions

jobs:
  run-script:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Install dependencies
        run: pip install -r requirements.txt

      - name: Run main.py
        env:
          WP_USERNAME: ${{ secrets.WP_USERNAME }}
          WP_APP_PASSWORD: ${{ secrets.WP_APP_PASSWORD }}
        run: python main.py
